<main>
  <div *ngIf="!submitted">
    <form [formGroup]="entryForm">
      <h1 style="text-align: center">Bracket Challenge</h1>

      <div>
        <sky-fluid-grid>
          <sky-row>
            <sky-column>
              <div style="font-size: large; max-width: 80%; margin-left: auto; margin-right: auto">
                The goal is to score the most points possible, while picking 2 seeds from each region. You earn points for each win. The points are calculated by multiplying the
                seed number by the round number. Example: #1 seeded Kansas wins rounds 1, 2, and 3, but loses in round 4. They would receive 1 point, 2 points, and 3 points for a
                total of 6 points. #10 seeded Utah State wins rounds 1 and 2, but loses in round 3. They would receive 10 points and 20 points for a total of 30 points. It can be
                beneficial to pick higher seeded teams, even if they don't win many games!
                <ul>
                  <li>Select 2 different teams in each of the 4 regions.</li>
                  <li>You will earn points for each win that your selected teams achieve.</li>
                  <li>Points awarded for a win will be the seed number times the round number.</li>
                  <li>You may choose ONE "superfan" school. This school will be awarded a 50% bonus for each win.</li>
                  <li>
                    <span class="sky-emphasized">***NOTE***</span>: Total possible points does not take into account that only one team will be able to advance out of each region.
                    The total points is the sum of all possible points for each team, and does not reflect your highest possible point total.
                  </li>
                  <li>
                    Validate all of your picks and points before clicking
                    <span class="sky-emphasized">Submit</span>.
                  </li>
                </ul>
              </div>
            </sky-column>
          </sky-row>
          <sky-row>
            <sky-column [screenSmall]="3" [screenMedium]="4" [screenLarge]="3" style="margin-left: auto">
              <sky-box>
                <sky-box-content>
                  <p class="region-header">{{ topLeftRegion.region_name }} Region</p>
                  <p>
                    <select formControlName="team1" (change)="update()">
                      <option *ngFor="let team of topLeftRegion.seeds" [ngValue]="team">
                        <button type="button">#{{ team.seed_number }} {{ team.school_name }}</button>
                      </option>
                    </select>
                  </p>
                  <p>
                    <select formControlName="team2" (change)="update()">
                      <option *ngFor="let team of topLeftRegion.seeds" [ngValue]="team">
                        <button type="button">#{{ team.seed_number }} {{ team.school_name }}</button>
                      </option>
                    </select>
                  </p>
                </sky-box-content>
              </sky-box>
            </sky-column>
            <sky-column [screenSmall]="3" [screenMedium]="4" [screenLarge]="3" style="margin-right: auto">
              <sky-box>
                <sky-box-content>
                  <p class="region-header">{{ topRightRegion.region_name }} Region</p>
                  <p>
                    <select formControlName="team3" (change)="update()">
                      <option *ngFor="let team of topRightRegion.seeds" [ngValue]="team">
                        <button type="button">#{{ team.seed_number }} {{ team.school_name }}</button>
                      </option>
                    </select>
                  </p>
                  <p>
                    <select formControlName="team4" (change)="update()">
                      <option *ngFor="let team of topRightRegion.seeds" [ngValue]="team">
                        <button type="button">#{{ team.seed_number }} {{ team.school_name }}</button>
                      </option>
                    </select>
                  </p>
                </sky-box-content>
              </sky-box>
            </sky-column>
          </sky-row>
          <sky-row>
            <sky-column [screenSmall]="3" [screenMedium]="4" [screenLarge]="3" style="margin-left: auto">
              <sky-box>
                <sky-box-content>
                  <p class="region-header">{{ bottomLeftRegion.region_name }} Region</p>
                  <p>
                    <select formControlName="team7" (change)="update()">
                      <option *ngFor="let team of bottomLeftRegion.seeds" [ngValue]="team">
                        <button type="button">#{{ team.seed_number }} {{ team.school_name }}</button>
                      </option>
                    </select>
                  </p>
                  <p>
                    <select formControlName="team8" (change)="update()">
                      <option *ngFor="let team of bottomLeftRegion.seeds" [ngValue]="team">
                        <button type="button">#{{ team.seed_number }} {{ team.school_name }}</button>
                      </option>
                    </select>
                  </p>
                </sky-box-content>
              </sky-box>
            </sky-column>
            <sky-column [screenSmall]="3" [screenMedium]="4" [screenLarge]="3" style="margin-right: auto">
              <sky-box>
                <sky-box-content>
                  <p class="region-header">{{ bottomRightRegion.region_name }} Region</p>
                  <p>
                    <select formControlName="team5" (change)="update()">
                      <option *ngFor="let team of bottomRightRegion.seeds" [ngValue]="team">
                        <button type="button">#{{ team.seed_number }} {{ team.school_name }}</button>
                      </option>
                    </select>
                  </p>
                  <p>
                    <select formControlName="team6" (change)="update()">
                      <option *ngFor="let team of bottomRightRegion.seeds" [ngValue]="team">
                        <button type="button">#{{ team.seed_number }} {{ team.school_name }}</button>
                      </option>
                    </select>
                  </p>
                </sky-box-content>
              </sky-box>
            </sky-column>
          </sky-row>
          <sky-row>
            <sky-column style="max-width: 400px; margin-left: auto; margin-right: auto">
              <sky-box>
                <sky-box-header class="region-header">Superfan School 50% bonus</sky-box-header>
                <sky-box-content>
                  The school you select here will receive 50% more points than normal.
                  <select class="possible-points" formControlName="bonusTeam" (change)="update()">
                    <option *ngFor="let team of selectedTeams" [ngValue]="team">
                      <button type="button">#{{ team.seed_number }} {{ team.school_name }}</button>
                    </option>
                  </select>
                </sky-box-content>
              </sky-box>
            </sky-column>
          </sky-row>
          <sky-row>
            <sky-column class="possible-points">
              <sky-box>
                <sky-box-header>Total possible points</sky-box-header>
                <sky-box-content> {{ totalPoints }} </sky-box-content>
              </sky-box>
            </sky-column>
          </sky-row>
          <sky-row>
            <sky-column class="possible-points">
              <sky-box style="max-width: 600px; margin-left: auto; margin-right: auto">
                <sky-input-box labelText="Name">
                  <input formControlName="name" />
                </sky-input-box>
                <sky-input-box labelText="Email">
                  <input formControlName="email" />
                </sky-input-box>
                <sky-alert *ngIf="hasErrors">{{ errorMessage }}</sky-alert>
                <button class="submit-button sky-btn sky-btn-primary sky-margin-inline-compact" [disabled]="submitDisabled" (click)="submit()">Submit</button>
              </sky-box>
            </sky-column>
          </sky-row>
        </sky-fluid-grid>
      </div>
    </form>
  </div>
  <div *ngIf="submitted">
    <sky-fluid-grid>
      <sky-row>
        <sky-column>
          <sky-box style="max-width: 400px; margin-left: auto; margin-right: auto">
            <sky-box-content>
              <h1 style="text-align: center">Picks submitted</h1>
              <p>Entry Name: {{ name }}</p>
              <p>E-mail: {{ email }}</p>
              <p>{{ team1?.region_name }} - #{{ team1?.seed_number }} {{ team1?.school_name }} - {{ team1?.possible_points }} points</p>
              <p>{{ team2?.region_name }} - #{{ team2?.seed_number }} {{ team2?.school_name }} - {{ team2?.possible_points }} points</p>
              <p>{{ team3?.region_name }} - #{{ team3?.seed_number }} {{ team3?.school_name }} - {{ team3?.possible_points }} points</p>
              <p>{{ team4?.region_name }} - #{{ team4?.seed_number }} {{ team4?.school_name }} - {{ team4?.possible_points }} points</p>
              <p>{{ team5?.region_name }} - #{{ team5?.seed_number }} {{ team5?.school_name }} - {{ team5?.possible_points }} points</p>
              <p>{{ team6?.region_name }} - #{{ team6?.seed_number }} {{ team6?.school_name }} - {{ team6?.possible_points }} points</p>
              <p>{{ team7?.region_name }} - #{{ team7?.seed_number }} {{ team7?.school_name }} - {{ team7?.possible_points }} points</p>
              <p>{{ team8?.region_name }} - #{{ team8?.seed_number }} {{ team8?.school_name }} - {{ team8?.possible_points }} points</p>
              <p>Total points from all seeds: {{ totalPoints }}</p>
            </sky-box-content>
          </sky-box>
        </sky-column>
      </sky-row>
    </sky-fluid-grid>
  </div>
</main>
